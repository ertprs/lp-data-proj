<button mat-button (click)="drawer.open()">
  <mat-icon aria-hidden="false">bar_chart</mat-icon>
</button>

<mat-drawer-container
  [class.drawer-opened]="drawer.opened"
  class="example-container"
>
  <mat-drawer #drawer class="drawer" mode="side" opened="false">
    <div fxFlexLayout="row">
      <mat-icon class="close" (click)="drawer.close()">close</mat-icon>
      <h4 class="note">
        [ Chain multiple values in input with "," without spaces ]
      </h4>
    </div>
    <form
      class="form"
      novalidate
      [formGroup]="queryForm"
      (ngSubmit)="onSubmit()"
    >
      <mat-accordion fxLayoutGap="10">
        <mat-expansion-panel formGroupName="start" class="startTime">
          <mat-expansion-panel-header class="space-between">
            <mat-panel-title>
              Start/End Times
            </mat-panel-title>
            <mat-panel-description>
              Set Time Parameters
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div
            *ngFor="let each of time | keyvalue: returnZero"
            [formGroupName]="each.value.formGroupName"
          >
            <mat-label>{{ each.value.name }}</mat-label>
            <mat-form-field>
              <input
                matInput
                [matDatepicker]="picker"
                placeholder="Choose a date"
                [value]="date"
                formControlName="date"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
            <mat-form-field>
              <mat-select formControlName="hour" placeholder="Hour">
                <mat-option
                  *ngFor="let hour of each.value.hours"
                  [value]="hour"
                >
                  {{ hour }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field>
              <mat-select formControlName="minute" placeholder="Minute">
                <mat-option
                  *ngFor="let minute of each.value.minutes"
                  [value]="minute"
                >
                  {{ minute }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field>
              <mat-select formControlName="period" placeholder="AM/PM">
                <mat-option
                  *ngFor="let period of each.value.periods"
                  [value]="period"
                >
                  {{ period }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion *ngFor="let item of chainedValues | keyvalue: returnZero">
        <mat-expansion-panel>
          <mat-expansion-panel-header class="space-between">
            <mat-panel-title>
              {{ item.value.name }}
            </mat-panel-title>
            <mat-panel-description>
              {{ item.value.description }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div
            *ngIf="item.value.name == 'Keyword Search'"
            [formGroupName]="item.value.formGroupName"
          >
            <mat-form-field>
              <input
                matInput
                [placeholder]="item.value.inputPlaceholder"
                [formControlName]="item.value.formControlName"
              />
            </mat-form-field>
            <mat-form-field>
              <mat-select [placeholder]="item.value.selectPlaceholder">
                <mat-option
                  *ngFor="let lookup of item.value.values"
                  [value]="lookup.value"
                >
                  {{ lookup }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div *ngIf="item.value.name != 'Keyword Search'">
            <mat-form-field>
              <input
                matInput
                [placeholder]="item.value.inputPlaceholder"
                [formControlName]="item.value.formControlName"
              />
            </mat-form-field>
            <mat-form-field>
              <mat-select>
                <mat-option
                  *ngFor="let lookup of item.value.values"
                  [value]="lookup.value"
                >
                  {{ lookup.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion *ngFor="let item of dropDownSelect | keyvalue: returnZero">
        <mat-expansion-panel>
          <mat-expansion-panel-header class="space-between">
            <mat-panel-title>
              {{ item.value.name }}
            </mat-panel-title>
            <mat-panel-description>
              {{ item.value.description }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <mat-form-field>
            <mat-select [placeholder]="item.value.selectPlaceholder" [formControlName]="item.value.formControlName">
              <mat-option
                *ngFor="let lookup of item.value.values"
                [value]="lookup.value"
              >
                {{ lookup.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion *ngFor="let item of singleInput | keyvalue: returnZero">
        <mat-expansion-panel>
          <mat-expansion-panel-header class="space-between">
            <mat-panel-title>
              {{ item.value.name }}
            </mat-panel-title>
            <mat-panel-description>
              {{ item.value.description }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <mat-form-field>
            <input matInput [placeholder]="item.value.inputPlaceholder" [formControlName]="item.value.formControlName"/>
          </mat-form-field>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion *ngFor="let item of doubleInput | keyvalue: returnZero" [formGroupName]="item.value.formGroupName">
        <mat-expansion-panel>
          <mat-expansion-panel-header class="space-between">
            <mat-panel-title>
              {{ item.value.name }}
            </mat-panel-title>
            <mat-panel-description>
              {{ item.value.description }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <mat-form-field>
            <input matInput [placeholder]="item.value.firstPlaceholder" formControlName="from"/>
          </mat-form-field>
          <mat-form-field>
            <input matInput [placeholder]="item.value.secondPlaceholder" formControlName="to"/>
          </mat-form-field>
        </mat-expansion-panel>
      </mat-accordion>
      <div fxLayout="row" fxLayoutAlign="end center"><button
        class="search-button"
        type="submit"
        mat-button
      >
        Search
      </button></div>
    </form> </mat-drawer
></mat-drawer-container>
